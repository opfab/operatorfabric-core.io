<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>OperatorFabric CICD</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body id="CICD" class="article toc2 toc-left">
<div id="header">
<h1>OperatorFabric CICD</h1>
<div class="details">
<span id="revnumber">version 3.0.0.RELEASE,</span>
<span id="revdate">08 November 2021</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_pipeline_configuration">1. Pipeline Configuration</a>
<ul class="sectlevel2">
<li><a href="#_cicd_pipeline">1.1. CICD Pipeline</a>
<ul class="sectlevel3">
<li><a href="#_travis_ci">1.1.1. Travis CI</a></li>
<li><a href="#_sonarcloud">1.1.2. SonarCloud</a></li>
<li><a href="#_github_documentation">1.1.3. GitHub (documentation)</a></li>
<li><a href="#_dockerhub">1.1.4. DockerHub</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#release_process">2. Release process</a>
<ul class="sectlevel2">
<li><a href="#_version_numbers">2.1. Version numbers</a></li>
<li><a href="#_releasing_a_major_or_minor_version">2.2. Releasing a Major or Minor Version</a>
<ul class="sectlevel3">
<li><a href="#_checking_the_release_notes">2.2.1. Checking the release notes</a></li>
<li><a href="#_creating_a_release_branch_and_preparing_the_release">2.2.2. Creating a release branch and preparing the release</a></li>
<li><a href="#_updating_the_version_list_on_the_website">2.2.3. Updating the version list on the website</a></li>
<li><a href="#_merging_the_release_branch_into_master">2.2.4. Merging the release branch into <code>master</code></a></li>
<li><a href="#_checking_the_docker_compose_files">2.2.5. Checking the docker-compose files</a></li>
<li><a href="#_publishing_the_release_on_github">2.2.6. Publishing the release on GitHub</a></li>
<li><a href="#publishing_client_lib_release">2.2.7. Publishing the jars for the client library to Maven Central</a></li>
<li><a href="#_advertising_the_new_release_on_the_lfe_mailing_list">2.2.8. Advertising the new release on the LFE mailing list</a></li>
<li><a href="#_preparing_the_next_version">2.2.9. Preparing the next version</a>
<ul class="sectlevel4">
<li><a href="#_on_the_release_notes_repository">2.2.9.1. On the release-notes repository</a></li>
<li><a href="#_on_the_operatorfabric_core_repository">2.2.9.2. On the operatorfabric-core repository</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_releasing_a_patch_hotfixes_version">2.3. Releasing a Patch (Hotfixes) Version</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The aim of this document is to describe our CICD pipeline and our release process.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pipeline_configuration"><a class="anchor" href="#_pipeline_configuration"></a>1. Pipeline Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section briefly describes the organization of our CICD pipeline. If you are looking for more detailed information,
see
<a href="/documentation/current/resources/index.html#mock_pipeline">this document</a>
describing the steps that were necessary to create our mock pipeline as well as the issues we ran into.</p>
</div>
<div class="paragraph">
<p>Most of the access and permissions required by our CICD plateform (Travis) are managed by tokens that are created on
each of the required services (SonarCloud, DockerHub, GitHub).
A technical user account (opfabtech) has been created for each of these services so that these tokens are not linked
to the account of any member of the team.</p>
</div>
<div class="sect2">
<h3 id="_cicd_pipeline"><a class="anchor" href="#_cicd_pipeline"></a>1.1. CICD Pipeline</h3>
<div class="sect3">
<h4 id="_travis_ci"><a class="anchor" href="#_travis_ci"></a>1.1.1. Travis CI</h4>
<div class="paragraph">
<p>We use Travis CI to manage our pipeline. Pushes (of commits or tags) and pull request creations are sent by GitHub to
Travis CI (these calls are visible on
the <a href="https://app.travis-ci.com/github/opfab/operatorfabric-core/requests">Requests page</a> on Travis CI).
Then, a build is started except for tag pushes (to avoid duplicate builds with the corresponding commit push) or
for commit pushes on feature branches (to avoid duplicate builds with the corresponding PR if it exists).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If you want to force a build to be triggered on a feature branch push, add <code>ci_build</code> to the commit message.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As of today, the build is composed of 7 stages:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
test-sonar
</td>
<td class="hdlist2">
<p>Builds the commit, runs tests and sonar analysis</p>
</td>
</tr>
<tr>
<td class="hdlist1">
test
</td>
<td class="hdlist2">
<p>Similar to <code>test-sonar</code> but without sonar analysis</p>
</td>
</tr>
<tr>
<td class="hdlist1">
doc
</td>
<td class="hdlist2">
<p>Generates the documentation (from asciidoc sources and API documentation) and pushes it to the opfab.github.io
repository to update the documentation for this release on the website.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
doc-latest
</td>
<td class="hdlist2">
<p>Generates the documentation (from asciidoc sources and API documentation) and pushes it to the
opfab.github.io repository to update the documentation for this release, as well as the "current" documentation on the
website.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
docker-push-version
</td>
<td class="hdlist2">
<p>Builds Docker images, tags them with the current version (either <code>SNAPSHOT</code> or <code>X.X.X.RELEASE</code>) and
pushes them to DockerHub</p>
</td>
</tr>
<tr>
<td class="hdlist1">
docker-push-latest
</td>
<td class="hdlist2">
<p>Builds Docker images, tags them with <code>latest</code> and pushes them to DockerHub</p>
</td>
</tr>
<tr>
<td class="hdlist1">
docker-tag-version
</td>
<td class="hdlist2">
<p>Builds Docker images and tags them with the current version, without pushing them anywhere. This
stage can be triggered when we just want to check that the images can be built without actually updating them on DockerHub.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Among these stages, four can be considered "sensitive" because they push public content that serves as a reference for
the project (docker images, documentation and to a lesser extent, sonar analysis), meaning we don&#8217;t want it tampered with.
These stages are <code>test-sonar</code>, <code>doc</code> and the two <code>docker-push</code> stages.</p>
</div>
<div class="paragraph">
<p>These stages are triggered depending on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>branch type</p>
</li>
<li>
<p>event type (CRON job, push or pull request)</p>
</li>
<li>
<p>commit message hooks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the table below:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
doc hook
</td>
<td class="hdlist2">
<p>stands for adding the keyword <code>ci_documentation</code> to the commit message</p>
</td>
</tr>
<tr>
<td class="hdlist1">
docker hook
</td>
<td class="hdlist2">
<p>stands for adding the keyword <code>ci_docker</code> to the commit message</p>
</td>
</tr>
<tr>
<td class="hdlist1">
latest hook
</td>
<td class="hdlist2">
<p>stands for adding the keyword <code>ci_latest</code> to the commit message</p>
</td>
</tr>
<tr>
<td class="hdlist1">
force build hook
</td>
<td class="hdlist2">
<p>stands for adding the keyword <code>ci_build</code> to the commit message</p>
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stripes-even stretch">
<caption class="title">Summary of stage triggers depending on branch</caption>
<colgroup>
<col style="width: 17.647%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8823%;">
<col style="width: 5.8831%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">develop</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">release</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">master</p></th>
<th class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">hotfixes</p></th>
<th class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">force build hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">pull request</p></th>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Stage</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">CRON</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">push</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">doc hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">docker hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">push</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">push</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">push</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">doc hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">docker hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">latest hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">push</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">doc hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">docker hook</p></th>
<th class="tableblock halign-center valign-top"><p class="tableblock">push</p></th>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>test-sonar</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">internal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>test</em></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">external</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>doc</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>doc-latest</em></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>docker-push-version</em></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>docker-push-latest</em></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>docker-tag-version</em></p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">X</p></td>
<td class="tableblock halign-center valign-top"></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>The <code>test-sonar</code> phase is ran for every build except those triggered by external PRs (i.e. originating from a fork
of the repository). This is because the <code>sonar-scanner</code> step it comprises requires access to an encrypted token
(to be able to push the analysis to
<a href="https://sonarcloud.io/dashboard?id=org.lfenergy.operatorfabric%3Aoperatorfabric-core">SonarCloud</a>, see below for details)
that is not shared with external PRs for security reasons, so this would cause the stage (and the build) to fail.
This is why in the case of external PRs the <code>test</code> phase is ran instead (leaving out sonar-scanner).</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_sonarcloud"><a class="anchor" href="#_sonarcloud"></a>1.1.2. SonarCloud</h4>
<div class="paragraph">
<p>To be allowed to push results to SonarCloud, Travis needs to be authenticated. This is done by generating a token on
SonarCloud with an account (opfabtech) that has admin rights to the organization, and then providing this token to Travis
either through the .travis.yml file or as an environment variable through Travis settings.</p>
</div>
</div>
<div class="sect3">
<h4 id="_github_documentation"><a class="anchor" href="#_github_documentation"></a>1.1.3. GitHub (documentation)</h4>
<div class="paragraph">
<p>To be allowed to push the generated documentation to the opfab.github.io, Travis needs write access to the repository.
This is done by setting up a Personal Access Token in GitHub using the technical account.
This token is then passed to Travis as an environment variable through Travis settings, and is used in the .travis.yml file.
Right now the scope of this token is maximal, it can probably be reduced (see <a href="https://opfab.atlassian.net/browse/OC-755">OC-755</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
After new content is pushed to the opfab.github.io repository, it can take a few minutes before this content is
visible on the website because it needs to be built by GitHub pages, and this can take a short while
depending on how busy the service is.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_dockerhub"><a class="anchor" href="#_dockerhub"></a>1.1.4. DockerHub</h4>
<div class="paragraph">
<p>To be allowed to push images to DockerHub, Travis needs to be authenticated. This is done by setting the DockerHub
login and password of the technical account as environment variables through Travis settings and referencing them in
the .travis.yml file.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="release_process"><a class="anchor" href="#release_process"></a>2. Release process</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_version_numbers"><a class="anchor" href="#_version_numbers"></a>2.1. Version numbers</h3>
<div class="paragraph">
<p>We work with two types of versions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>X.Y.Z.RELEASE versions are stable versions</p>
</li>
<li>
<p>SNAPSHOT version represents the current state of merged developments</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Version numbers for X.Y.Z.RELEASE should be understood like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>X: Major version, a major version adds new features and breaks compatibility with previous major and minor versions.</p>
</li>
<li>
<p>Y: Minor version, a minor version adds new features and does not break compatibility with previous minor versions for
the same major version.</p>
</li>
<li>
<p>Z: Patch, a patch version only contains bug fixes of current minor version</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_releasing_a_major_or_minor_version"><a class="anchor" href="#_releasing_a_major_or_minor_version"></a>2.2. Releasing a Major or Minor Version</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
To release a version we use some Travis dedicated jobs. These jobs are triggered by specific commit keywords
and rely on the VERSION file at the root of this repository to know which version is being produced.
It is thus crucial to double-check the content of this file before any push (triggering the Travis jobs) is made.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Before releasing a version, you need to prepare the release.</p>
</div>
<div class="sect3">
<h4 id="_checking_the_release_notes"><a class="anchor" href="#_checking_the_release_notes"></a>2.2.1. Checking the release notes</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <a href="https://github.com/opfab/operatorfabric-core/projects"><code>Projects</code> tab</a> of the core repository, click on the
project corresponding to the release that is about to be released.</p>
</li>
<li>
<p>Make sure that the
<a href="https://github.com/opfab/release-notes/blob/master/release_notes.md">release_notes.md</a>
file lists all the issues, bugs, tags or feature requests that are relevant for OperatorFabric users along with
explanations if need be.</p>
</li>
<li>
<p>Based on the content of this version and the rules listed above, make sure that the version number is appropriate.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_release_branch_and_preparing_the_release"><a class="anchor" href="#_creating_a_release_branch_and_preparing_the_release"></a>2.2.2. Creating a release branch and preparing the release</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <a href="https://github.com/opfab/operatorfabric-core">operatorfabric-core repository</a>, create a branch off the <code>develop</code> branch named
<code>X.X.X.release</code> (note the lowercase <code>release</code> to distinguish it from <code>X.X.X.RELEASE</code> tags).</p>
<div class="listingblock">
<div class="content">
<pre>git checkout -b X.X.X.release</pre>
</div>
</div>
</li>
<li>
<p>Use the ./CICD/prepare_release_version.sh script to automatically perform all the necessary changes:</p>
<div class="listingblock">
<div class="content">
<pre>./CICD/prepare_release_version.sh -v X.X.X.RELEASE</pre>
</div>
</div>
<div class="paragraph">
<p>You should get the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Current version is SNAPSHOT (based on VERSION file)
Preparing X.X.X.RELEASE
Updating version for pipeline in VERSION file
Replacing SNAPSHOT with X.X.X.RELEASE in swagger.yaml files
Using X.X.X.RELEASE for lfeoperatorfabric images in dev and docker environment docker-compose files
The following files have been updated:
 M VERSION
 M config/dev/docker-compose.yml
 M config/docker/docker-compose.yml
 M services/core/cards-publication/src/main/modeling/swagger.yaml
 M services/core/businessconfig/src/main/modeling/swagger.yaml
 M services/core/users/src/main/modeling/swagger.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>This script performs the following changes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace SNAPSHOT with X.X.X.RELEASE in swagger.yaml files and the VERSION file at the root operator-fabric folder</p>
</li>
<li>
<p>Change the version from SNAPSHOT to X.X.X.RELEASE in the docker-compose files for dev and docker deployments</p>
</li>
</ul>
</div>
</li>
<li>
<p>Commit the changes with the template message:</p>
<div class="listingblock">
<div class="content">
<pre>git add .
git commit -s -m "[RELEASE] X.X.X.RELEASE"</pre>
</div>
</div>
</li>
<li>
<p>Push the commit</p>
<div class="listingblock">
<div class="content">
<pre>git push --set-upstream origin X.X.X.release</pre>
</div>
</div>
</li>
<li>
<p>Check that the build is correctly triggered</p>
<div class="paragraph">
<p>You can check the status of the build job triggered by the commit on
<a href="https://travis-ci.com/opfab/operatorfabric-core/branches">Travis CI</a>.
The build job should have two stages: <code>test-sonar</code> and <code>docker-tag-version</code>.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Wait for the build to complete (around 20 minutes) and check that all stages have been successful.
This ensures that the code builds, tests are OK and there is no error preventing documentation or Docker images
generation.</p>
</div>
</div>
<div class="sect3">
<h4 id="_updating_the_version_list_on_the_website"><a class="anchor" href="#_updating_the_version_list_on_the_website"></a>2.2.3. Updating the version list on the website</h4>
<div class="paragraph">
<p>On the <a href="https://github.com/opfab/opfab.github.io">website repository</a>,
edit the <a href="https://github.com/opfab/opfab.github.io/blob/master/<em>data/versions.yml"></em>/data/versions.yml</a> file to:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add the version being released to the list with the <code>current</code> badge</p>
</li>
<li>
<p>Remove the <code>current</code> badge from the previous version</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="title">Before</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">- <span class="string"><span class="content">id: SNAPSHOT</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">SNAPSHOT</span></span>
- <span class="string"><span class="content">id: D.E.F.RELEASE</span></span>
  <span class="key">badge</span>: <span class="string"><span class="content">current</span></span>
- <span class="string"><span class="content">id: A.B.C.RELEASE</span></span>
  <span class="comment">#... end of file omitted</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">After</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">- <span class="string"><span class="content">id: SNAPSHOT</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">SNAPSHOT</span></span>
- <span class="string"><span class="content">id: X.X.X.RELEASE</span></span>
  <span class="key">badge</span>: <span class="string"><span class="content">current</span></span>
- <span class="string"><span class="content">id: D.E.F.RELEASE</span></span>
- <span class="string"><span class="content">id: A.B.C.RELEASE</span></span>
  <span class="comment">#... end of file omitted</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This file determines which versions (and in which order) are displayed on the
<a href="https://opfab.github.io/pages/releases.html">release page</a> of the website.</p>
</div>
</div>
<div class="sect3">
<h4 id="_merging_the_release_branch_into_master"><a class="anchor" href="#_merging_the_release_branch_into_master"></a>2.2.4. Merging the release branch into <code>master</code></h4>
<div class="paragraph">
<p>Once the release branch build is passing, you should merge the release branch into <code>master</code> to bring the new
developments into <code>master</code> and trigger the CICD tasks associated with a release (Docker images for DockerHub and
documentation).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git checkout master <i class="conum" data-value="1"></i><b>(1)</b>
git pull <i class="conum" data-value="2"></i><b>(2)</b>
git merge X.X.X.release <i class="conum" data-value="3"></i><b>(3)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Check out the <code>master</code> branch</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Make sure your local copy is up to date</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Merge the <code>X.X.X.release</code> branch into <code>master</code>, accepting changes from X.X.X.release in case of conflicts.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Specific keywords such as "ci_docker" etc. are no longer required in the case of a release on master as
by design any release on master becomes the "latest" version, so docker images generation (both for the version
tag and the latest tag) and documentation update (both for the release and the "current" folder) should always
be triggered.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre>git tag X.X.X.RELEASE <i class="conum" data-value="1"></i><b>(1)</b>
git push <i class="conum" data-value="2"></i><b>(2)</b>
git push origin X.X.X.RELEASE <i class="conum" data-value="3"></i><b>(3)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Tag the commit with the <code>X.X.X.RELEASE</code> tag</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Push the commits to update the remote <code>master</code> branch</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Push the tag
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Check that the build is correctly triggered</p>
<div class="paragraph">
<p>You can check the status of the build job triggered by the commit on
<a href="https://travis-ci.com/opfab/operatorfabric-core/branches">Travis CI</a>.
The build job should have the following four stages (or three if the images aren&#8217;t tagged as latest)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/master_branch_build.png" alt="Running build for master branch screenshot">
</div>
</div>
<div class="paragraph">
<p>Wait for the build to complete (around 40 minutes) and check that all stages have been successful.</p>
</div>
</li>
<li>
<p>Check that the <code>X.X.X.RELEASE</code> images have been generated and pushed to DockerHub.</p>
</li>
<li>
<p>Check that the <code>latest</code> images have been updated on DockerHub (if this has been triggered).</p>
</li>
<li>
<p>Check that the documentation has been generated and pushed to the GitHub pages website</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Check the version and revision date at the top of the documents in the current documentation
(for example <a href="https://opfab.github.io/documentation/current/architecture/">the architecture documentation</a>)</p>
</li>
<li>
<p>Check that you see the X.X.X.RELEASE under the <a href="https://opfab.github.io/pages/releases.html">releases page</a>
and that the links work.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Check that the tag was correctly pushed to GitHub and is visible under the
<a href="https://github.com/opfab/operatorfabric-core/tags">tags page</a> for the repository.</p>
</li>
</ol>
</div></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_checking_the_docker_compose_files"><a class="anchor" href="#_checking_the_docker_compose_files"></a>2.2.5. Checking the docker-compose files</h4>
<div class="paragraph">
<p>While the docker-compose files should always point to the SNAPSHOT images while on the <code>develop</code> branch, on the <code>master</code>
branch they should rely on the latest RELEASE version available on DockerHub. Once the CI pipeline triggered by the
previous steps has completed successfully, and you can see X.X.X.RELEASE images for all services on DockerHub, you should:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Remove your locally built X.X.X.RELEASE images if any</p>
</li>
<li>
<p>Run the config/docker docker-compose file to make sure it pulls the images from DockerHub and behaves as intended.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>People who want to experiment with OperatorFabric are pointed to this docker-compose so it&#8217;s important to make sure
that it&#8217;s working correctly.</p>
</div>
</div>
<div class="sect3">
<h4 id="_publishing_the_release_on_github"><a class="anchor" href="#_publishing_the_release_on_github"></a>2.2.6. Publishing the release on GitHub</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>On the <a href="https://github.com/opfab/operatorfabric-core/releases"><code>releases</code> screen</a> for the core repository, draft a new
release.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select the existing X.X.X.RELEASE tag</p>
</li>
<li>
<p>The title should be X.X.X.RELEASE</p>
</li>
<li>
<p>In the description field, paste the content from the release_notes.md file from the
<a href="https://github.com/opfab/release-notes/">release-notes repository</a>.</p>
</li>
<li>
<p>Replace any "TODO" comments with the appropriate links to the documentation.</p>
</li>
<li>
<p>Click "Publish release"</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="publishing_client_lib_release"><a class="anchor" href="#publishing_client_lib_release"></a>2.2.7. Publishing the jars for the client library to Maven Central</h4>
<div class="paragraph">
<p>Once everything else looks ok, you can publish the jars for the client library to MavenCentral. This is done as a last
step once we are pretty sure we won&#8217;t need to go back and change things on the release because jars are not meant to be
removed from Maven Central once they are published (even briefly), and it&#8217;s not something that could be managed by the
project.</p>
</div>
<div class="paragraph">
<p>To do so:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the appropriate properties (credentials and GPG key information) as described in the
<a href="/documentation/current/dev_env/index.html#client_lib_pub_conf">documentation for the publishing task</a></p>
</li>
<li>
<p>Run the following command from the project root:</p>
<div class="listingblock">
<div class="content">
<pre>./gradlew publish</pre>
</div>
</div>
</li>
<li>
<p>After a while you should be prompted to enter the passphrase for the GPG key.</p>
</li>
<li>
<p>Once the task has completed, log in to the <a href="https://s01.oss.sonatype.org/">OSSRH Repository</a> using the same credentials
as for the Sonatype JIRA.</p>
<div class="imageblock">
<div class="content">
<img src="../images/ossrh_repo_welcome.png" alt="Welcome page for the OSSRH repository manager">
</div>
</div>
</li>
<li>
<p>Click on <code>Staging repositories</code> link on the left. After a while (and maybe after clicking the refresh button), you
should see a repository with the name orgopfab-XXXX (where XXXX is a Sonatype-generated id, not related to the
release number).</p>
<div class="imageblock">
<div class="content">
<img src="../images/ossrh_staging_repos.png" alt="Staging repositories">
</div>
</div>
</li>
<li>
<p>Click on the repository then on the "content" tab below to check its content and metadata.</p>
<div class="imageblock">
<div class="content">
<img src="../images/check_staging_repo.png" alt="Check staging repository">
</div>
</div>
</li>
<li>
<p>If there is an issue with the repository, click on the "Drop" button and start the process again after making the
necessary changes. If everything looks in order, click on the "Close" button and add a small comment when prompted to
confirm.</p>
<div class="imageblock">
<div class="content">
<img src="../images/close_staging_repo.png" alt="Close staging repository">
</div>
</div>
</li>
<li>
<p>This will trigger validation of the <a href="https://central.sonatype.org/publish/requirements/">Sonatype requirements</a> (for
example, making sure that the pom file contains the required information), as you can see from the Activity tab below
(Refresh might be needed).</p>
<div class="imageblock">
<div class="content">
<img src="../images/closing_and_validation_of_repo.png" alt="Closing and validation of the staging repository">
</div>
</div>
</li>
<li>
<p>If all the validations pass, the "Release" button will become available. Click it to send the jars to Maven Central.
When prompted, write a comment then confirm (keeping the "Automatically Drop" option checked).</p>
<div class="imageblock">
<div class="content">
<img src="../images/confirm_release_to_maven_central.png" alt="Release to Maven Central">
</div>
</div>
</li>
<li>
<p>The jars for the release should then be available on the <a href="https://repo1.maven.org/maven2/org/opfab/">project space in the Maven repository</a> within 10 minutes.</p>
</li>
<li>
<p>It can take up to two hours for them to appear on the <a href="https://search.maven.org/search?q=opfab">Maven Central Repository Search</a>.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_advertising_the_new_release_on_the_lfe_mailing_list"><a class="anchor" href="#_advertising_the_new_release_on_the_lfe_mailing_list"></a>2.2.8. Advertising the new release on the LFE mailing list</h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Send an email to the <a href="mailto:opfab-announce@lists.lfenergy.org">opfab-announce@lists.lfenergy.org</a> mailing list with a link to the release notes on GitHub.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Here is the link to the <a href="https://lists.lfenergy.org/g/main">administration website for the LFE mailing lists</a>
in case there is an issue.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_preparing_the_next_version"><a class="anchor" href="#_preparing_the_next_version"></a>2.2.9. Preparing the next version</h4>
<div class="sect4">
<h5 id="_on_the_release_notes_repository"><a class="anchor" href="#_on_the_release_notes_repository"></a>2.2.9.1. On the release-notes repository</h5>
<div class="paragraph">
<p>Remove the items listed in the release_notes.md file so it&#8217;s ready for the next version.</p>
</div>
</div>
<div class="sect4">
<h5 id="_on_the_operatorfabric_core_repository"><a class="anchor" href="#_on_the_operatorfabric_core_repository"></a>2.2.9.2. On the operatorfabric-core repository</h5>
<div class="paragraph">
<p>Now that the release branch has served its purpose, it should be deleted so as not to clutter the repository and to
avoid confusion with the actual release commit tagged on <code>master</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git branch -d X.X.X.release <i class="conum" data-value="1"></i><b>(1)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Delete the branch locally</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You should also delete the branch on GitHub.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You should also close the project for this version, and create one for the next version if it doesn&#8217;t already exist
(use the "Automated Kanban" template).</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_releasing_a_patch_hotfixes_version"><a class="anchor" href="#_releasing_a_patch_hotfixes_version"></a>2.3. Releasing a Patch (Hotfixes) Version</h3>
<div class="paragraph">
<p>Let&#8217;s say fixes are needed on version X.X.0.RELEASE, and will be released as X.X.X.RELEASE. If it&#8217;s the first patch
version to be released for this minor version (i.e. version X.X.1.RELEASE), you will need to create the <code>X.X.hotfixes</code>
branch.
To do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">git checkout X.X.0.RELEASE <i class="conum" data-value="1"></i><b>(1)</b>
git checkout -b X.X.hotfixes <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Checkout X.X.0.RELEASE tag</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create (and checkout) branch <code>X.X.hotfixes</code> from this commit</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If branch <code>X.X.hotfixes</code> already exists, you can just check it out.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">git checkout X.X.hotfixes</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, follow the process described</p>
</div>
<div class="paragraph">
<p><a href="/documentation/current/community/index.html#working_on_hotfix">here</a>
to create feature branches, work on fixes and merge them back into <code>X.X.hotfixes</code>.</p>
</div>
<div class="paragraph">
<p>Once all the big fixes that need to go into the version X.X.X.RELEASE have been merged into branch <code>X.X.hotfix</code>, you
can release the patch version. To do so:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Write a release notes detailing the bug fixes in the release_notes.md file found under
<strong>src/docs/asciidoc/docs</strong> in the <a href="https://github.com/opfab/operatorfabric-core">operatorfabric-core repository</a>.</p>
</li>
<li>
<p>Use the ./CICD/prepare_release_version.sh script to automatically perform all the necessary changes:</p>
<div class="listingblock">
<div class="content">
<pre>./CICD/prepare_release_version.sh -v X.X.X.RELEASE</pre>
</div>
</div>
</li>
<li>
<p>Commit the changes, tag them and push both to GitHub:</p>
<div class="listingblock">
<div class="content">
<pre>git add .
git commit -m "[RELEASE] X.X.X.RELEASE ci_docker ci_documentation" <i class="conum" data-value="1"></i><b>(1)</b>
git tag X.X.X.RELEASE <i class="conum" data-value="2"></i><b>(2)</b>
git push <i class="conum" data-value="3"></i><b>(3)</b>
git push origin X.X.X.RELEASE <i class="conum" data-value="4"></i><b>(4)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Commit the changes</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Tag the release</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Push the commit</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Push the tag</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In the case of a patch on the last major/minor version tagged on master, this version will become the
<code>latest</code> version. In this case, add <code>ci_latest</code> instead of <code>ci_docker ci_documentation</code> to the commit message
to also update the <code>latest</code> docker images on DockerHub and the <code>current</code> documentation on the website.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You then need to release the client library jars for the hotfix version. To do so, refer to the
<a href="#publishing_client_lib_release">corresponding section</a> for standard releases.</p>
</div>
</div>
</div>
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>